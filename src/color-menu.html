<html>
    <head>
        <title>Main Menu</title>
        <style type="text/css">
            body {
                margin: 0 auto;
                padding: 0;
				background-color: black;
            }
            .menu {
                width: 1000px;
                height: 400px;
                display: none;
            }
            .menu .row {
                height: 100px;
                margin-bottom: 5px;
            }
            .menu .row .color {
                width: 150px;
                height: 100%;
                display: inline-block;
                margin: 5px;
            }
			
			#count { position:absolute; left:70%; top: 10%; width:20%; font-size: 9em; font-family: arial; color: white; text-shadow: 0 0 0.3em white; }
            #border { position: fixed; width: 790px; height: 590px; padding: 0; margin: 0; top: 0; left: 0; border: solid white 5px; }
        </style>
    </head>
    <body>
		<div id="border"></div>
		<div id="count"></div>
        <div class="menu">
            <div class="row">
                <div class="color" style="background: #1abc9c;"></div>
                <div class="color" style="background: #2ecc71;"></div>
                <div class="color" style="background: #3498db;"></div>
                <div class="color" style="background: #9b59b6;"></div>
                <div class="color" style="background: #34495e;"></div>
            </div>
            <div class="row">
                <div class="color" style="background: #16a085;"></div>
                <div class="color" style="background: #27ae60;"></div>
                <div class="color" style="background: #2980b9;"></div>
                <div class="color" style="background: #8e44ad;"></div>
                <div class="color" style="background: #2c3e50;"></div>
            </div>
            <div class="row">
                <div class="color" style="background: #f1c40f;"></div>
                <div class="color" style="background: #e67e22;"></div>
                <div class="color" style="background: #e74c3c;"></div>
                <div class="color" style="background: #ecf0f1;"></div>
                <div class="color" style="background: #95a5a6;"></div>
            </div>
            <div class="row">
                <div class="color" style="background: #f39c12;"></div>
                <div class="color" style="background: #d35400;"></div>
                <div class="color" style="background: #c0392b;"></div>
                <div class="color" style="background: #bdc3c7;"></div>
                <div class="color" style="background: #7f8c8d;"></div>
            </div>
        </div>

        <script src="js/jquery-1.8.2.js" type="text/javascript"></script>
		<script src="js/jquery-ui-1.9.0.custom.min.js" type="text/javascript"></script>
		<script src="js/ubidisplays-multitouch-0.8.js" type="text/javascript"></script>
        <script type="text/javascript">
		
			$(document).ready(function()
                        {
                                // Show the border.
                                Surface_PropertiesChanged();
                                
								// Add multi-touch.
								pMTProcessor = new KinectTouch({
									debug : false,               // Turn on debug points.
									trails : true,              // Turn on finger trails (this shows the Kinect data used to detect the finger).
									point_limit : 200,           // The number of points we are allowed to process.
									surface_zoffset : 0.05,     // The offset from the surface (in meters) at which to start capturing data.
									height : 0.1,               // The distance from the surface offset (in meters) at which to stop capturing data.
								});
								
                                // Request the lowest point cube.
                                Authority.request("KinectLowestPointCube", {
                                        relativeto : Surface.Name,                      // The surface we want information relative too.
                                        surface_zoffset : 0.05, // 0.015        // The height from the surface we want to accept points from (in meters).
                                        height:0.10,                                            // The height from the surface+offset we want to no longer accept points from (in meters).
                                        callback : "Handle_LowestPoints",       // The function we want to call back with information.
                                        point_limit : 50,                                       // The max number of points to accept.
                                        sendemptyframes : false,                        // Do we want callbacks when we have empty frames (i.e. when we have no points at all).
                                });
                                
                        });
						
			function Surface_PropertiesChanged() {
				$('.menu').css('height',window.innerHeight);
				$('.menu').css('width',window.innerWidth);				
				$('.row').css('height',window.innerHeight/4.5);
				$('.color').css('width',window.innerWidth/5.5 );
				
				$('#border').show().delay(2000).fadeOut(500);
            }
		
			var iFrameCount = 0;
			
			$('.menu').css('display', 'block');
			
			function Get_Selected_Color(x_val, y_val) {
				// Return the selected color value
				
			}
			
			function Handle_LowestPoints(pointList) {
				//$("#count").text(iFrameCount + "");
			
				// If more than 40 points
				if (pointList.length > 40) {
					// If points have been in frame for 1 second
					if (iFrameCount == 30) {
						//$('.menu').css('display', 'block');
						avg_pos_x = comp_avg(pointList,0).toPrecision(3);
						avg_pos_y = comp_avg(pointList,1).toPrecision(3);
						$(document.elementFromPoint(avg_pos_x, avg_pos_y)).click();
					}
					
					iFrameCount++;
				} else {
					iFrameCount = 0;
				}
			}

            var color = '#';
            $('.color').bind("mouseup touchend",function(e) {
				var touch = e.originalEvent.targetTouches[0];
				$("#pos_x").text(touch.target);
				//$("#pos_y").text(touch.pageY);
                color = $(this).css('background');
                //console.log(color);
				$('body').css('background', color);
            });
        </script>
    </body>
</html>